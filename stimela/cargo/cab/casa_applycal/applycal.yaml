task: casa_applycal
info: "Apply calibrations solutions(s) to data"

image: casa
# versions: x, y, z     ## only needed if only a subset of the defined base image versions is supported by this cab: default is all versions

msdir: true
prefix: "-"
binary: applycal

inputs:
  # "_usr" is a magic word which means include section(s). This pulls some standard parameter definitions from casa.yaml,
  # _into the section in which the _use directive appears_. So it's like an include. 
  _use:
    - base.casa.params.mssel_inputs
  #...to which we can add more

  docallib:
    info: "Use callib or traditional cal apply parameters"
    type: bool
    default: false 

  applymode:
    info: "Calibration mode: '' = 'calflag','calflagstrict','trial','flagonly','flagonlystrict', or 'calonly'"
    type: str
    default: ""
    choices: 
      - calflag 
      - calflagstrict 
      - trial 
      - flagonly 
      - flagonlystrict 
      - calonly

outputs:


# same here, using _use to include standard behaviours, but we also add an extra one for the cleanup section
management:
  environment:  
    _use: base.casa.management.common.environment

  cleanup:         
    _use: base.casa.management.common.cleanup
    applycal.last: [DELETE]

  wranglers:
    _use: base.casa.management.common.wranglers

